<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>üéÑ Chat with Santa Live from the North Pole üéÖ</title>
<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  background: linear-gradient(#d32f2f, #b71c1c);
  color: #fff;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  height: 100vh;
}
header {
  text-align: center;
  padding: 1rem 0;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(4px);
  font-weight: 700;
  font-size: 1.3rem;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
}
#chat {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.msg {
  max-width: 75%;
  padding: 10px 14px;
  border-radius: 12px;
  line-height: 1.4;
}
.santa {
  align-self: flex-start;
  background: rgba(255,255,255,0.2);
}
.user {
  align-self: flex-end;
  background: #2e7d32;
}
#input-area {
  display: flex;
  gap: 10px;
  padding: 0.8rem;
  background: rgba(255,255,255,0.1);
}
#input-area input {
  flex: 1;
  padding: 10px;
  border: none;
  border-radius: 8px;
  outline: none;
}
#input-area button {
  background: #ffd54f;
  color: #b71c1c;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  padding: 10px 16px;
  cursor: pointer;
}
#nice-btn {
  position: fixed;
  bottom: 80px;
  right: 20px;
  background: #1b5e20;
  color: #fff;
  border: none;
  border-radius: 50px;
  padding: 12px 20px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0,0,0,0.4);
}
#nice-modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
}
#nice-modal .content {
  background: #fff; color: #000;
  padding: 20px;
  border-radius: 10px;
  width: 90%; max-width: 400px;
  text-align: center;
}
#nice-modal input {
  width: 80%;
  padding: 8px;
  margin: 5px;
  border: 1px solid #ccc;
  border-radius: 6px;
}
#nice-modal button {
  margin-top: 10px;
  padding: 8px 14px;
  background: #b71c1c;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
#snowflake span {
  position: absolute;
  top: -10px;
  color: #fff;
  user-select: none;
  font-size: 1em;
  animation: fall linear infinite;
}
@keyframes fall { to { transform: translateY(100vh); opacity: 0; } }
.santa-avatar {
  width: 40px; height: 40px; border-radius: 50%; margin-right: 8px; vertical-align: middle;
}
</style>
</head>
<body>
<header>üéÖ Chat with Santa Live from the North Pole üéÑ</header>
<div id="chat"></div>

<div id="input-area">
  <input id="userInput" type="text" placeholder="Type your message to Santa...">
  <button id="sendBtn">Send</button>
</div>

<button id="nice-btn">üéÅ Check Nice List</button>

<div id="nice-modal">
  <div class="content">
    <h3>Check if You're on the Nice List üéÑ</h3>
    <input id="nameInput" placeholder="Your name"><br>
    <input id="deedInput" placeholder="A good deed you did"><br>
    <button id="checkBtn">Check</button>
    <button id="closeBtn">Close</button>
  </div>
</div>

<div id="snowflake"></div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("userInput");
const btn = document.getElementById("sendBtn");
let userName = "";

// üß† YOUR OPENAI API KEY HERE
const OPENAI_API_KEY = "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";

function addMessage(text, sender = "santa") {
  const msg = document.createElement("div");
  msg.classList.add("msg", sender);
  msg.innerHTML =
    sender === "santa"
      ? `<img src="https://www.shutterstock.com/image-illustration/cute-avatar-cartoon-santa-claus-260nw-2373881501.jpg" class="santa-avatar"> ${text}`
      : text;
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
}

async function santaReply(message) {
  addMessage("Santa is typing... üéÖ", "santa");
  const messages = [
    { role: "system", content: "You are Santa Claus. Always reply jolly, say 'Ho ho ho!', mention elves, reindeer, and Christmas cheer. Be festive, kind, and fun." },
    { role: "user", content: userName ? `${userName} says: ${message}` : message }
  ];

  try {
    const res = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${OPENAI_API_KEY}`
      },
      body: JSON.stringify({
        model: "gpt-4o-mini",
        messages
      })
    });
    const data = await res.json();
    chat.lastChild.remove(); // remove typing indicator
    const reply = data.choices?.[0]?.message?.content || "Ho ho ho! Merry Christmas!";
    addMessage(reply, "santa");
  } catch (err) {
    console.error(err);
    chat.lastChild.remove();
    addMessage("Ho ho ho! Santa‚Äôs workshop is busy! Try again soon!", "santa");
  }
}

btn.onclick = () => {
  const text = input.value.trim();
  if (!text) return;
  addMessage(text, "user");
  input.value = "";
  santaReply(text);
};
input.addEventListener("keypress", e => e.key === "Enter" && btn.click());

// Nice List feature
document.getElementById("nice-btn").onclick = () =>
  (document.getElementById("nice-modal").style.display = "flex");
document.getElementById("closeBtn").onclick = () =>
  (document.getElementById("nice-modal").style.display = "none");
document.getElementById("checkBtn").onclick = () => {
  const name = document.getElementById("nameInput").value.trim();
  const deed = document.getElementById("deedInput").value.trim();
  if (!name || !deed) return alert("Please fill in both fields!");
  userName = name;
  addMessage(`Ho ho ho, ${name}! That ${deed} was a wonderful deed! You're on the Nice List! üéÅ`);
  document.getElementById("nice-modal").style.display = "none";
};

// Snow animation
function createSnowflake() {
  const snow = document.createElement("span");
  snow.textContent = "‚ùÑ";
  snow.style.left = Math.random() * 100 + "%";
  snow.style.fontSize = 10 + Math.random() * 14 + "px";
  snow.style.animationDuration = 5 + Math.random() * 5 + "s";
  document.getElementById("snowflake").appendChild(snow);
  setTimeout(() => snow.remove(), 10000);
}
setInterval(createSnowflake, 150);

addMessage("Ho ho ho! Welcome to Santa's Chat! üéÑ");
</script>
</body>
                                                      </html>
